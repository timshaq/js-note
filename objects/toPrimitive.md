# Преобразование объектов в примитивы
01. Все объекты в логическом контексте являются true. Существуют лишь их численные и строковые преобразования.
01. Численные преобразования происходят, когда мы выполняем математические операции.
01. Строковые преобразования обычно происходят, когда мы выводим объект alert(obj), а также в других случаях, когда объект используется как строка.

## Преобразование к примитивам
Существуют три варианта («хинта») преобразований:
+ "string" — когда операция ожидает получить строку:
```
alert(obj) // вывод
```
```
anotherObj[obj] // используем объект в качестве имени свойства
```
+ "number" — в случае математических операций:
```
// явное преобразование
let num = Number(obj);

// математическое (исключая бинарный оператор "+")
let n = +obj; // унарный плюс
let delta = date1 - date2;

// сравнения больше/меньше
let greater = user1 > user2;
```
+ "default" — когда оператор «не уверен», какой тип ожидать (если возможны сразу и строка, и число, и объект)
> На практике все встроенные объекты, (кроме Date), реализуют "default" преобразования тем же способом, что и "number". И нам следует поступать так же.

## Процесс преобразования
движок JavaScript пытается найти и вызвать три следующих метода объекта:
01. Вызывает obj[Symbol.toPrimitive] (hint) – метод с символьным ключом Symbol.toPrimitive (системный символ), если такой метод существует, и передаёт ему хинт
01. Иначе, если хинт равен "string"
пытается вызвать obj.toString(), а если его нет, то obj.valueOf(), если он существует.
01. В случае, если хинт равен "number" или "default" пытается вызвать obj.valueOf(), а если его нет, то obj.toString(), если он существует

## Symbol.toPrimitive
метод с таким названием (если есть) используется для всех преобразований:
```
obj[Symbol.toPrimitive] = function(hint) {
  // должен вернуть примитивное значение
  // hint равно чему-то одному из: "string", "number" или "default"
};
```

Используем свой метод
```
let user = {
  name: "John",
  money: 1000,

  [Symbol.toPrimitive](hint) {
    alert(`hint: ${hint}`);
    return hint == "string" ? `{name: "${this.name}"}` : this.money;
  }
};

// демонстрация результатов преобразований:
alert(user); // hint: string -> {name: "John"}
alert(+user); // hint: number -> 1000
alert(user + 500); // hint: default -> 1500
```

## Возвращаемые типы
> возвращаемый тип всегда должен быть примитивом

>По историческим причинам, если toString или valueOf вернёт объект, то ошибки не будет, но такое значение будет проигнорировано (как если бы метода вообще не существовало).

> Метод Symbol.toPrimitive, напротив, обязан возвращать примитив, иначе будет ошибка.